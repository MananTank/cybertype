@import 'tailwindcss';

/* Define theme colors that reference CSS variables - inline keeps var() at runtime */
@theme inline {
  --color-bg: var(--bg);
  --color-primary: var(--primary);
  --color-secondary: var(--secondary);
  --color-tertiary: var(--tertiary);
  --color-error: var(--error);
  --color-fast: var(--fast);
  --color-normal: var(--normal);
  --color-slow: var(--slow);
  --color-island-bg: var(--island-bg);
  --color-island-fg: var(--island-fg);
  --animate-blink: blink 1s step-end infinite;
  --color-island-button-bg: var(--island-button-bg);
  --color-island-button-hover-bg: var(--island-button-hover-bg);
  --color-muted-button-bg: var(--muted-button-bg);
  --color-muted-button-bg-hover: var(--muted-button-bg-hover);
}

/* Base styles */
@layer base {
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    background: var(--bg);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  body::-webkit-scrollbar {
    width: 6px;
  }

  body::-webkit-scrollbar-track {
    background: var(--bg);
  }

  body::-webkit-scrollbar-thumb {
    background: var(--tertiary);
  }

  body::-webkit-scrollbar-thumb:hover {
    background: var(--secondary);
  }
}

/* Keyframes */
@keyframes blink {
  0%,
  50% {
    opacity: 1;
  }
  51%,
  100% {
    opacity: 0;
  }
}

@keyframes cursor {
  0%,
  60% {
    background: var(--primary);
    color: var(--bg);
  }
  70%,
  100% {
    background: var(--bg);
    color: var(--primary);
  }
}

@keyframes cursor-error {
  0%,
  60% {
    background: var(--error);
    color: var(--bg);
  }
  70%,
  100% {
    background: var(--bg);
    color: var(--error);
  }
}

@keyframes loading {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-in-down {
  from {
    opacity: 0;
    filter: blur(4px);
    transform: translateY(-40px);
  }
  to {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
  }
}

@keyframes glow {
  from {
    opacity: 0.2;
    transform: scale(0.7);
  }
  to {
    opacity: 0.5;
    transform: scale(1.2);
  }
}

/* Keyboard speed colors */

.color-unknown {
  --color: var(--secondary);
  --anim-duration: 2s;
}

.color-fast {
  --color: var(--fast);
  --anim-duration: 2s;
}
.color-normal {
  --color: var(--normal);
  --anim-duration: 2.5s;
}
.color-slow {
  --color: var(--slow);
  --anim-duration: 3s;
}

/* Visibility states */
body:not(.typing) .hide-when-not-typing {
  pointer-events: none;
  opacity: 0;
}
body.typing .hide-when-tyasping {
  opacity: 0;
  transition: opacity 200ms ease, filter 200ms ease;
}
body:not(.typing) .show-when-typing {
  pointer-events: none;
  opacity: 0;
}

/* Dynamic Island */
.island-container {
  transition: opacity 200ms cubic-bezier(0.666, 0, 0.4, 1),
    transform 200ms cubic-bezier(0.666, 0, 0.4, 1);
}
body.typing .island-container {
  transform: translateY(-100%);
  opacity: 0;
  pointer-events: none;
}
body:not(.typing) .stats-container {
  display: none;
}
